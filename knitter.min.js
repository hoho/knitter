/*!
 * knitter v0.1.0, https://github.com/hoho/knitter
 * (c) 2015 Marat Abdullin, MIT license
 */
!function(t,e){"use strict";function o(t,r,n){if(!(this instanceof o))return new o(t,r,n);t instanceof Node||(t=e.querySelector(t)),r instanceof Node||(r=e.querySelector(r)),n=n||{};var i=n.parent;if(!i||i instanceof Node||(i=e.querySelector(i)),t instanceof Node&&r instanceof Node&&(!i||i&&i instanceof Node)){var d=this,f=d.node=e.createElement("div");d.id=a++,d.from=t,d.to=r,d.dir=n.dir,(i||e.body).appendChild(f),d.update(!0)}}function r(o){for(var r,i=o.node,a=o.from,f=o.to,s=0,p=0,c=i;c&&c!==e.body;)c=c.parentNode;if(!c)return void delete d[o.id];for(c=i;c;){for(r=c.offsetParent;c&&c.offsetParent===r;)c=c.parentNode;c&&(s+=(c.offsetLeft||0)+(c.clientLeft||0),p+=(c.offsetTop||0)+(c.clientTop||0))}o.id in d||(d[o.id]=o);var l,h,m=a.getBoundingClientRect(),u=f.getBoundingClientRect(),b=m.left,g=m.right,y=m.top,v=m.bottom,x=u.left,w=u.right,K=u.top,N=u.bottom,M=t.pageXOffset,k=t.pageYOffset,q=M+b+(g-b)/2,C=k+y+(v-y)/2,T=M+x+(w-x)/2,L=k+K+(N-K)/2;r=o.dir,r="forward"===r?[0,1]:"back"===r?[1,0]:"none"===r?[0,0]:[1,1],q>T&&(c=T,T=q,q=c,c=L,L=C,C=c,c=x,x=b,b=c,c=w,w=g,g=c,c=K,K=y,y=c,c=N,N=v,v=c,c=r[1],r[1]=r[0],r[0]=c),i.className="Knitter"+(r[0]?" Knitter_from":"")+(r[1]?" Knitter_to":"");var _,E,S,B=(g-b)/2,O=(v-y)/2,P=(w-x)/2,R=(N-K)/2,z=(L-C)/(T-q),A=Math.atan(z),F=[[q+B,C+z*B],[q-B,C-z*B],[q+O/z,C+O],[q-O/z,C-O]],H=[[T+P,L+z*P],[T-P,L-z*P],[T+R/z,L+R],[T-R/z,L-R]];for(c=0;c<F.length;c++)if(l=F[c],l[0]>=q-B&&l[0]<=q+B&&l[1]>=C-O&&l[1]<=C+O)for(r=0;r<H.length;r++)h=H[r],h[0]>=T-P&&h[0]<=T+P&&h[1]>=L-R&&h[1]<=L+R&&(l[0]<T-P||l[0]>T+P||l[1]<L-R||l[1]>L+R)&&(E=n(l,h),(void 0===_||_>E)&&(_=E,S=l));_=Math.round(_)-6,c="transform:rotate("+A+"rad);",i.style.cssText=_>0?"display:block;left:"+Math.round(S[0]+3*Math.cos(A)-s)+"px;top:"+Math.round(S[1]+3*Math.sin(A)-p)+"px;width:"+_+"px;-webkit-"+c+"-ms-"+c+c:"display:none;"}function n(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}var i,a=1,d={},f=t.requestAnimationFrame||setTimeout;o.prototype.update=function(t){var e=this;t?f(function(){r(e)},0):r(e)},o.prototype.remove=function(){var t=this.node;t&&t.parentNode&&t.parentNode.removeChild(t),delete d[this.id]},t.Knitter=o,t.addEventListener("resize",function(){f(function(){for(var t in d)r(d[t])},0)}),i=e.createElement("style"),i.innerHTML=".Knitter{background:#000;display:none;height:2px;opacity:.4;position:absolute;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.Knitter:after,.Knitter:before{border-bottom:30px solid transparent;border-bottom-style:inset;border-top:30px solid transparent;border-top-style:inset;content:'';height:0;margin:-29px -40px 0 0;opacity:.01;position:absolute;-webkit-transform:scale(.1);-ms-transform:scale(.1);transform:scale(.1);width:0}.Knitter:before{border-right:90px solid #000;margin-left:-43px}.Knitter:after{border-left:90px solid #000;right:-3px}.Knitter_from:before,.Knitter_to:after{opacity:1}",e.head.appendChild(i)}(window,document);